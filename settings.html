<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - GitBell</title>
    <link rel="stylesheet" href="settings.css">
    <script>
        // Apply theme immediately to prevent flash of wrong theme
        (async () => {
            try {
                const result = await chrome.storage.sync.get(['settings']);
                const theme = result.settings?.theme || 'dark';
                document.documentElement.setAttribute('data-theme', theme);
            } catch (e) {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        })();
    </script>
</head>

<body>
    <div class="settings-container">
        <!-- Header -->
        <header class="settings-header">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"
                            fill="currentColor" />
                    </svg>
                    <div>
                        <h1>GitBell</h1>
                        <p>Settings & Configuration</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="settings-main">
            <!-- GitHub Authentication -->
            <section class="settings-section">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <h2>GitHub Authentication</h2>
                    </div>
                    <span class="optional-badge">Optional</span>
                </div>
                <p class="section-description">
                    Add a Personal Access Token to increase API rate limits from 60 to 5,000 requests/hour.
                    <a href="https://github.com/settings/tokens/new?scopes=public_repo&description=GitHub%20Issue%20Notifier"
                        target="_blank" class="link">Generate token →</a>
                </p>
                <div class="form-group">
                    <label for="githubToken">Personal Access Token</label>
                    <div class="input-with-action">
                        <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"
                            autocomplete="off">
                        <button id="validateToken" class="validate-btn">Validate</button>
                    </div>
                    <div id="tokenStatus" class="token-status"></div>
                </div>
            </section>

            <!-- Check Interval -->
            <section class="settings-section">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                            <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <h2>Check Interval</h2>
                    </div>
                </div>
                <p class="section-description">
                    How often should the extension check for new issues?
                </p>
                <div class="form-group">
                    <div class="interval-options">
                        <label class="interval-option">
                            <input type="radio" name="interval" value="5">
                            <span class="option-content">
                                <span class="option-label">Every 5 minutes</span>
                                <span class="option-description">Most frequent</span>
                            </span>
                        </label>
                        <label class="interval-option">
                            <input type="radio" name="interval" value="10" checked>
                            <span class="option-content">
                                <span class="option-label">Every 10 minutes</span>
                                <span class="option-description">Recommended</span>
                            </span>
                        </label>
                        <label class="interval-option">
                            <input type="radio" name="interval" value="15">
                            <span class="option-content">
                                <span class="option-label">Every 15 minutes</span>
                                <span class="option-description">Balanced</span>
                            </span>
                        </label>
                        <label class="interval-option">
                            <input type="radio" name="interval" value="30">
                            <span class="option-content">
                                <span class="option-label">Every 30 minutes</span>
                                <span class="option-description">Less frequent</span>
                            </span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Notifications -->
            <section class="settings-section">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <h2>Notifications</h2>
                    </div>
                </div>
                <p class="section-description">
                    Configure how you want to be notified about new issues.
                </p>
                <div class="form-group">
                    <div class="toggle-group">
                        <label class="toggle-option">
                            <div class="toggle-info">
                                <span class="toggle-label">Enable Notifications</span>
                                <span class="toggle-description">Show browser notifications for new issues</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="notificationsEnabled" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <label class="toggle-option">
                            <div class="toggle-info">
                                <span class="toggle-label">Sound Alerts</span>
                                <span class="toggle-description">Play sound with notifications</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="soundEnabled" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Appearance -->
            <section class="settings-section">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" />
                            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <h2>Appearance</h2>
                    </div>
                </div>
                <p class="section-description">
                    Customize the look and feel of the extension.
                </p>
                <div class="form-group">
                    <div class="toggle-group">
                        <label class="toggle-option">
                            <div class="toggle-info">
                                <span class="toggle-label">Light Theme</span>
                                <span class="toggle-description">Switch between dark and light mode</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="themeToggle">
                                <span class="slider"></span>
                            </label>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Data Management -->
            <section class="settings-section">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <h2>Data Management</h2>
                    </div>
                </div>
                <p class="section-description">
                    Export or clear your extension data.
                </p>
                <div class="form-group">
                    <div class="action-buttons">
                        <button id="exportData" class="secondary-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                            Export Repository List
                        </button>
                        <button id="clearData" class="danger-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                            Clear All Data
                        </button>
                    </div>
                </div>
            </section>

            <!-- About -->
            <section class="settings-section">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                            <path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                        <h2>About</h2>
                    </div>
                </div>
                <div class="about-content">
                    <p><strong>Version:</strong> 1.0.0</p>
                    <p><strong>Purpose:</strong> Never miss a GitHub issue again! Perfect for GSoC contributors and
                        open-source enthusiasts.</p>
                    <p class="about-links">
                        <a href="https://github.com" target="_blank" class="link">Documentation</a>
                        <span>•</span>
                        <a href="https://github.com" target="_blank" class="link">Report Issue</a>
                    </p>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="settings-footer">
            <button id="saveSettings" class="save-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M17 21v-8H7v8M7 3v5h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                Save Settings
            </button>
            <div id="saveStatus" class="save-status"></div>
        </footer>
    </div>

    <script src="storage.js"></script>
    <script src="github-api.js"></script>
    <script src="settings.js"></script>
</body>

</html>